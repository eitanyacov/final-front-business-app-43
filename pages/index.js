import React, { useState, useEffect } from 'react';
import Login from '../components/Login';
import { useRouter } from 'next/router'
import Head from "next/head";
import MiddleBar from "../components/MiddleBar";
import ReportsBar from "../components/ReportsBar";
import SideBarPage from "../components/SideBarPage";
import TopBoxes from "../components/TopBoxes";


export default function Home() {
  const [user, setUser] = useState({})
  const router = useRouter();
  useEffect(()=> {
    let res = localStorage.getItem("user")
    const result = JSON.parse(res)
    setUser(result)
    }, [])
    if (typeof window === 'object') {
      // mark that the app was server-side rendered
      window.__WAS_SSR = true
    }
   return (
    <div>
      <Head>
        <title>Business manager</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {user ? (<main>
        <SideBarPage />
        <TopBoxes />
        <MiddleBar />
        <ReportsBar />
      </main>) : <Login />}
      
    </div>
  );
}
